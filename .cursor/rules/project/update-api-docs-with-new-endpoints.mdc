---
description: Update API documentation whenever new API endpoints are added
alwaysApply: true
---

# Update API Docs When Adding New Endpoints

Whenever you add, change, or remove an API endpoint, update the API documentation in the same change set.

## Where to Update

1. **`docs/api.md`** — Canonical API reference. Add or edit the endpoint with:
   - Method and path
   - Query/body parameters (name, type, required, description)
   - Response shape and status codes
   - Error responses (4xx, 5xx)
2. **`backend/README.md`** — API section. Keep the bullet list of endpoints in sync (method, path, and one-line description).
3. **`docs/openapi.json`** — Machine-readable OpenAPI 3 schema. Regenerate after any endpoint change by running from the **backend** directory: `python scripts/generate_openapi.py`. Do not edit this file by hand.

## Guidelines

- **New endpoint** → Add a section in `docs/api.md`, an entry in `backend/README.md` API list, and regenerate `docs/openapi.json`.
- **Changed request/response or status codes** → Update the corresponding section in `docs/api.md`, the README line if the summary changes, and regenerate `docs/openapi.json`.
- **Removed endpoint** → Remove its section from `docs/api.md`, its entry from `backend/README.md`, and regenerate `docs/openapi.json`.

## Checklist

1. Adding or changing an endpoint? → Update `docs/api.md`, `backend/README.md` (API section), and run `python scripts/generate_openapi.py` from `backend/` to refresh `docs/openapi.json`.
2. Removing an endpoint? → Remove from docs and regenerate `docs/openapi.json`.
3. Before considering the work done? → Confirm the docs and OpenAPI schema match the implemented behavior.
